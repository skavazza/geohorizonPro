<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="theme-color" content="#0a0e27">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <title>GeoHorizon Pro - ProjeÃ§Ã£o GeogrÃ¡fica AvanÃ§ada</title>
  
  <!-- CDN Dependencies -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <link rel="stylesheet" href="https://unpkg.com/leaflet-measure/dist/leaflet-measure.css" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet">
  
  <!-- Local CSS -->
  <link rel="stylesheet" href="src/css/style.css">
</head>
<body>
  <div class="header">
    <h1>GeoHorizon Pro</h1>
    <p>ProjeÃ§Ã£o GeogrÃ¡fica, CÃ¡lculo de Horizonte & MediÃ§Ãµes AvanÃ§adas</p>
  </div>

  <div class="main-container">
    <!-- Sidebar -->
    <div class="sidebar">
      <!-- Theme Toggle -->
      <div class="theme-toggle">
        <label class="toggle-switch">
          <input type="checkbox" id="theme-toggle-checkbox">
          <span class="switch-slider"></span>
        </label>
      </div>
      
      <!-- Mode Selector -->
      <div class="mode-selector">
        <button class="mode-btn active" data-mode="projecao">ğŸ¯ ProjeÃ§Ã£o</button>
        <button class="mode-btn" data-mode="horizonte">ğŸŒ… Horizonte</button>
        <button class="mode-btn" data-mode="objeto">ğŸ¢ Objeto</button>
        <button class="mode-btn" data-mode="medicao">ğŸ“ MediÃ§Ã£o</button>
      </div>

      <!-- LocalizaÃ§Ã£o -->
      <div class="section">
        <div class="section-title">ğŸ“ LocalizaÃ§Ã£o</div>
        <button class="btn btn-secondary" id="getLocation">ğŸ“± Usar Minha LocalizaÃ§Ã£o</button>
        <button class="btn btn-success" id="pickFromMap" style="margin-top: 0.5rem;">ğŸ—ºï¸ Selecionar no Mapa</button>
        
        <div class="input-grid" style="margin-top: 1rem;">
          <div class="input-group">
            <label class="input-label">Latitude</label>
            <input type="number" class="input-field" id="latitude" step="0.000001">
          </div>
          <div class="input-group">
            <label class="input-label">Longitude</label>
            <input type="number" class="input-field" id="longitude" step="0.000001">
          </div>
        </div>
      </div>

      <!-- ParÃ¢metros - ProjeÃ§Ã£o -->
      <div class="section" id="params-projecao">
        <div class="section-title">âš™ï¸ ParÃ¢metros de ProjeÃ§Ã£o</div>
        <div class="input-group">
          <label class="input-label">ElevaÃ§Ã£o (m)</label>
          <input type="number" class="input-field" id="elevacao" value="0" step="0.1">
        </div>
        <div class="input-group">
          <label class="input-label">DistÃ¢ncia (km)</label>
          <input type="number" class="input-field" id="distancia" value="10" step="0.1" min="0">
        </div>
        <div class="input-group">
          <label class="input-label">Azimute MagnÃ©tico (Â°)</label>
          <input type="number" class="input-field" id="azimute" value="0" step="0.1" min="0" max="360">
        </div>
        <button class="btn btn-primary" id="calcular">ğŸ”¬ Calcular ProjeÃ§Ã£o</button>
      </div>

      <!-- ParÃ¢metros - Horizonte -->
      <div class="section" id="params-horizonte" style="display: none;">
        <div class="section-title">âš™ï¸ CÃ¡lculo de Horizonte</div>
        <div class="input-group">
          <label class="input-label">Altura do Observador (m)</label>
          <input type="number" class="input-field" id="alturaObservador" value="1.7" step="0.1" min="0">
        </div>
        <button class="btn btn-primary" id="calcularHorizonte">ğŸ”¬ Calcular Horizonte</button>
      </div>

      <!-- ParÃ¢metros - Objeto -->
      <div class="section" id="params-objeto" style="display: none;">
        <div class="section-title">âš™ï¸ CÃ¡lculo de Objeto</div>
        <div class="input-group">
          <label class="input-label">Altura do Observador (m)</label>
          <input type="number" class="input-field" id="alturaObservadorObj" value="1.7" step="0.1" min="0">
        </div>
        <div class="input-group">
          <label class="input-label">Altura do Objeto (m)</label>
          <input type="number" class="input-field" id="alturaObjeto" value="50" step="0.1" min="0">
        </div>
        <button class="btn btn-primary" id="calcularObjeto">ğŸ”¬ Calcular DistÃ¢ncia</button>
      </div>

      <!-- ParÃ¢metros - MediÃ§Ã£o -->
      <div class="section" id="params-medicao" style="display: none;">
        <div class="section-title">ğŸ“ MediÃ§Ã£o de DistÃ¢ncia</div>
        <button class="btn btn-success" id="toggleMeasurement">Ativar MediÃ§Ã£o</button>
        <p style="margin-top: 0.75rem; font-size: 0.85rem; color: var(--color-text-secondary);">
          Clique no mapa para marcar 2 pontos e medir a distÃ¢ncia entre eles.
        </p>
        <button class="btn btn-secondary btn-small" id="clearMeasurement" style="margin-top: 0.75rem;">Limpar MediÃ§Ãµes</button>
      </div>

      <!-- Resultados -->
      <div class="section" id="resultados" style="display: none;">
        <div class="section-title">ğŸ“Š Resultados</div>
        <div id="resultsContent"></div>
      </div>

      <!-- ConfiguraÃ§Ãµes do Mapa -->
      <div class="section">
        <div class="section-title">ğŸ—ºï¸ ConfiguraÃ§Ãµes do Mapa</div>
        <div class="checkbox-group">
          <input type="checkbox" id="toggleRings" checked>
          <label for="toggleRings">AnÃ©is de DistÃ¢ncia</label>
        </div>
        <div class="checkbox-group">
          <input type="checkbox" id="toggleLabels" checked>
          <label for="toggleLabels">Legendas dos AnÃ©is</label>
        </div>
        <div class="checkbox-group">
          <input type="checkbox" id="toggleCompass" checked>
          <label for="toggleCompass">BÃºssola</label>
        </div>
        <div class="input-group" style="margin-top: 0.75rem;">
          <label class="input-label">Estilo do Mapa</label>
          <select class="select-field" id="mapStyle">
            <option value="streets">OpenStreetMap</option>
            <option value="satellite">SatÃ©lite</option>
            <option value="terrain">Terreno</option>
          </select>
        </div>
      </div>

      <!-- ExportaÃ§Ã£o -->
      <div class="section">
        <div class="section-title">ğŸ’¾ Exportar Dados</div>
        <div class="export-buttons">
          <button class="btn btn-secondary btn-small" id="exportGPX">GPX</button>
          <button class="btn btn-secondary btn-small" id="exportKML">KML</button>
          <button class="btn btn-secondary btn-small" id="exportJSON">JSON</button>
        </div>
      </div>
    </div>

    <!-- Map Container -->
    <div class="map-container">
      <div id="map"></div>
      <div class="compass" id="compass">
        <div class="compass-needle" id="compassNeedle"></div>
      </div>
    </div>
  </div>

  <!-- Notification -->
  <div class="notification" id="notification"></div>

  <!-- Loading -->
  <div class="loading" id="loading">
    <div class="loading-spinner"></div>
    <p id="loadingText">Carregando...</p>
  </div>

  <!-- CDN Scripts -->
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
  <script src="https://unpkg.com/leaflet-measure/dist/leaflet-measure.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@turf/turf@6/turf.min.js"></script>
  
  <!-- Local Scripts -->
  <script src="src/js/constants.js"></script>
  <script src="src/js/utils.js"></script>
  <script src="src/js/calculations.js"></script>
  <script src="src/js/map.js"></script>
  <script src="src/js/handlers.js"></script>
  <script src="src/js/export.js"></script>
  <script src="src/js/main.js"></script>
</body>
</html>